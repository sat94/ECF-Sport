{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}
{% load custom_tags %}

{% block head %}
<link rel="stylesheet" href="{% static 'structure.css' %}"> 
{% endblock head %}

{% block title %}detail{% endblock title %}

{% block content %}
<div class="top">   
    <div class="row">
        <div class="suffit col-2">   
            <p> Nom :</P>
            <p> Responsable : </p>
            <p> Adresse :</P></br>
            <p> Partenaire :</P>
            <p> Membres :</P>
            <P> Haman : </p>
            <p> Sauna : </p>
            <p> Piscine : </p>
            <p> Numeros : </P>
            <p> Actif :</p>
        </div>
        <div class="col-2">
            <p>{{structure}}</P>
            {% if structure.user.nom %}
            <p><a hx-swap="outerHTML" hx-target="#page"  hx-push-url="true"  hx-post="{% url 'responsable' structure.pk %}" class="nom">{{structure.user.nom}}</a></p>
            {% else %}
            <p>inconnu</p>
            {% endif %}

            <p>{{structure.adresse}} </P></br>
            <p>{{structure.part}}</P>
            <p>{{structure.membre}}</p>
            {% if user.admin %}    
                {% if structure.haman %}
                <p><input checked type="checkbox" name="option"></p>
                {% else %}
                <p><input type="checkbox" name="option"></p>
                {% endif %} 
                {% if structure.sauna %}
                <p><input checked type="checkbox" name="option"></p>
                {% else %}
                <p><input type="checkbox" name="option"></p>
                {% endif %}
                {% if structure.piscine %}
                <p><input checked type="checkbox" name="option"></p>
                {% else %}
                <p><input type="checkbox" name="option"></p>
                {% endif %}
            {% else %}  
                {% if structure.haman %}
                <p><img src={% static 'vert.png' %}  style="width:10%;margin-left:1rem;"></p>
                {% else %}                                      
                <p><img src={% static 'false.png' %}  style="width:8%;margin-left:1rem;"></p>
                {% endif %}
                {% if structure.sauna %}
                <p><img src={% static 'vert.png' %}  style="width:10%;margin-left:1rem;"></p>
                {% else %}                                      
                <p><img src={% static 'false.png' %}  style="width:8%;margin-left:1rem;"></p>
                {% endif %}
                {% if structure.piscine %}
                <p><img src={% static 'vert.png' %}  style="width:10%;margin-left:1rem;"></p>
                {% else %}                                      
                <p><img src={% static 'false.png' %}  style="width:8%;margin-left:1rem;"></p>
                {% endif %}
            {% endif %}    
            <p>{{structure.numberPhone|phoneNumber}}</P>
            {% if user.is_admin %}
            <form method ="POST">                
                {% csrf_token %}    
               <p hx-swap="outerHTML" hx-target="#page" hx-post="{% url 'valide_structure' pk=structure.id %}">{{ form }}</p>
            </form>
            {% else %}     
                {% if structure.actif %}
                <p><img src={% static 'vert.png' %} style="width:10%;margin-left:1rem;" class="vertical"></p>
                {% else %}                                      
                <p><img src={% static 'false.png' %} style="width:8%;margin-left:1rem;" class="vertical"></p>
                {% endif %}
            {% endif %} 
            
        </div>
        <div class="col-4 d-flex align-item-center">        
                {% if structure.photo.url %} 
                <img src={{ structure.photo.url }} class="rounded-3 img-fluid float"  alt={{ structure.photo.url }}>
                {% else %}
                <img src={% static 'inconnu.jpg' %} class="rounded-3 img-fluid float"  alt="inconnu.jpg">
                {% endif %}            
        </div>
        <div class="col-4 align-center"> 
            <h2 class> Options du partenaire</h2><br>       
                {% for option in options %}               
                    {% if option.id in listoptionpartenaire %} 
                    <div class="row">
                        <div class="col-2">    
                            <p><img src={% static 'vert.png' %} style="width:50%;margin-left:1rem;"></P>
                        </div>   
                        <div class="col-2">         
                            <p>{{ option.slug }}</p> 
                        </div>   
                    </div> 
                    {% endif %}
                {% endfor %}            

            <br><h2> Options de la structure :</h2><br>  
            {% if user.is_admin %}   
            <form method ="POST">
                {% csrf_token % %} 
                {{ forms }}<br>
                <button value="submit" class="btn btn-dark btn-lg"  type="submit">Accepter les modifications</button>
            </form>                            
        
            {% else %}  
                {% for option in options %}                
                    {% if option.id not in listoptionpartenaire %}
                        {% if option.id in listoptionstructure %}
                        <div class="row">
                            <div class="col-2">
                                <img src={% static 'vert.png' %}  style="width:50%;margin-left:1rem;">
                            </div>
                            <div class="col-2">
                                {{ option.slug }}
                            </div>
                        </div>
                        {% else %}  
                        <div class="row">
                            <div class="col-2">                                    
                                <img src={% static 'false.png' %}  style="width:50%;margin-left:1rem;">
                                {{ option.slug }}
                            </div>
                        </div>
                        {% endif %}
                    {% endif %}
                {% endfor %}  
            {% endif %}           
        </div> 
    </div>  
    <div class ="row">
        <div class="col-12"> 
           <a hx-swap="outerHTML"  hx-push-url="true" hx-target="#page" hx-get="{% url 'structure' slug=structure.part %}" class="btn btn-dark btn-lg" tabindex="-1" role="button" id="button" aria-disabled="true"><img src="{% static "retour.png" %}" style="height:1rem"></a>
    </div>    
 </div>
{% endblock content %}
